(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[1],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),a=n(89),c=n.n(a).a.create(Object(r.a)({},{withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"185399ed-5bf1-4614-a945-6c901c6ff6b3"}}))},12:function(e,t,n){e.exports={header:"Header_header__GBlRf",container:"Header_container__3VAuY",header__row:"Header_header__row__9rRPH",header__logo:"Header_header__logo__1QZmN",header__block:"Header_header__block__2Kro9",_unregistered:"Header__unregistered__1_L0n",header__avatar:"Header_header__avatar__1SO1u",avatar:"Header_avatar__1fsGt",avatarToolpTip:"Header_avatarToolpTip__Gt60Z",header__authBlock:"Header_header__authBlock__3VZto",burger:"Header_burger__14yHT",_active:"Header__active__NTfLI",burgerMenu:"Header_burgerMenu__11-EH",menuWrapper:"Header_menuWrapper__LfomX"}},18:function(e,t,n){e.exports={wrapper:"App_wrapper__2O0ML",header:"App_header__QNvib",mainRow__container:"App_mainRow__container__x2k6z",mainRow__wrapper:"App_mainRow__wrapper__3Sxtc",aside:"App_aside__kLIxR",main:"App_main__1NrXX",footer:"App_footer__3rYjV"}},230:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(27),i=n.n(c),o=n(14),u=n(36),s=n(87),l=n(91),d=n(50),f=n(65),_=n(28),j=n(5),h="social_network/app/SET_APP_INITIALIZED",b=function(){return{type:h}},p={isAppInitialized:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;return t.type===h?Object(j.a)(Object(j.a)({},e),{},{isAppInitialized:!0}):e},m=n(72),g=Object(u.c)({profile:d.a,users:f.b,auth:_.a,form:s.a,app:O,chat:m.a}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,x=Object(u.e)(g,v(Object(u.a)(l.a))),w=(n(230),n(4)),E=n(23),S=function(e){return e.app.isAppInitialized},T=n(34),k=n(18),y=n.n(k),A=n(9),C=n(8),N=n(41),P=n.n(N),I=n(12),L=n.n(I),F=n(86),U=n(25),H=n.n(U),R=[{name:"Profile",url:"/profile"},{name:"Users",url:"/users"},{name:"Chat",url:"/chat"}],G=n(2),D=function(e){var t=P()(H.a.menu__link,H.a.menu__link_active),n=H.a.menu__link,r=function(e){return e.isActive?t:n};return Object(G.jsxs)("div",{className:H.a.menu,children:[Object(G.jsx)("div",{className:H.a.menu__prevBlock}),Object(G.jsx)("nav",{className:H.a.menu__body,children:R.map((function(t){return Object(G.jsx)(E.c,{to:t.url,className:r,onClick:e.onLinkClick,children:t.name},t.name)}))})]})},M=a.a.memo(D),z=n(66),B=function(){var e=Object(o.c)(),t=Object(o.d)(T.a),n=Object(o.d)(T.c),a=Object(o.d)(F.b),c=Object(r.useState)(!1),u=Object(C.a)(c,2),s=u[0],l=u[1];return Object(G.jsx)("header",{className:L.a.header,children:Object(G.jsx)("div",{className:L.a.container,children:Object(G.jsxs)("div",{className:L.a.header__row,children:[Object(G.jsxs)(E.b,{to:"/",className:L.a.header__logo,children:[Object(G.jsx)("strong",{children:"IT"})," Social"]}),n&&Object(G.jsxs)("div",{className:L.a.header__block,children:[Object(G.jsxs)("div",{className:L.a.header__authBlock,children:[Object(G.jsx)("div",{children:Object(G.jsx)("button",{onClick:function(){return e(Object(_.d)())},children:"Logout"})}),Object(G.jsxs)("div",{className:L.a.header__avatar,children:[Object(G.jsx)("img",{src:a&&a.photos.small?a.photos.small:z.a,alt:"userAvatar",className:L.a.avatar}),Object(G.jsxs)("div",{className:L.a.avatarToolpTip,children:[Object(G.jsx)("p",{children:"Hello, ".concat(t.login,".")}),Object(G.jsx)("p",{children:"Your id: ".concat(t.id)})]})]})]}),Object(G.jsx)("button",{onClick:function(){l((function(e){return!e})),document.body.classList.toggle("_scrolling-lock")},children:Object(G.jsx)("div",{className:P()(L.a.header__menu,L.a.burger,Object(A.a)({},L.a._active,s)),children:Object(G.jsx)("span",{})})})]}),s&&i.a.createPortal(Object(G.jsx)("div",{className:L.a.burgerMenu,children:Object(G.jsx)("div",{className:L.a.menuWrapper,children:Object(G.jsx)(M,{onLinkClick:function(e){l(!1),document.body.classList.remove("_scrolling-lock")}})})}),document.getElementById("root"))]})})})},Y=a.a.memo(B),W=n(92),Z=n.n(W),V=function(){return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("aside",{className:Z.a.aside,children:Object(G.jsx)(M,{})})})},X=a.a.memo(V),Q=n(62),J=n.n(Q),K=function(){return Object(G.jsx)("footer",{className:J.a.footer,children:Object(G.jsx)("div",{className:J.a.footer__copyright,children:"\xa9 2022 vvliumanov"})})},q=a.a.memo(K),$=n(61),ee=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,331))})),te=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(5)]).then(n.bind(null,333))})),ne=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,334))})),re=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,332))})),ae=function(e){var t=Object(o.c)(),n=Object(o.d)(S),a=Object(o.d)(T.a),c=a.isAuth,i=a.id,u=function(e){alert(e.reason),console.error(e)},s=function(){return t((function(e,t){var n=e(Object(_.b)()).then((function(){var n,r=null===(n=t())||void 0===n?void 0:n.auth.id;r&&e(Object(d.d)(r))}));Promise.all([n]).then((function(){e(b())}))}))};return Object(r.useEffect)((function(){return s(),window.addEventListener("unhandledrejection",u),function(){window.removeEventListener("unhandledrejection",u)}}),[]),Object(G.jsx)(G.Fragment,{children:n?Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(E.a,{children:Object(G.jsxs)("div",{className:y.a.wrapper,children:[Object(G.jsx)("div",{className:y.a.header,children:Object(G.jsx)(Y,{})}),Object(G.jsx)("div",{className:y.a.mainRow,children:Object(G.jsx)("div",{className:y.a.mainRow__container,children:Object(G.jsxs)("div",{className:y.a.mainRow__wrapper,children:[c&&Object(G.jsx)("div",{className:y.a.aside,children:Object(G.jsx)(X,{})}),Object(G.jsx)("div",{className:y.a.main,children:Object(G.jsx)(r.Suspense,{fallback:Object(G.jsx)($.a,{}),children:Object(G.jsxs)(w.d,{children:[Object(G.jsx)(w.b,{path:"/",element:Object(G.jsx)(w.a,{replace:!0,to:"/profile/".concat(i)})}),Object(G.jsx)(w.b,{path:"/profile",element:Object(G.jsx)(w.a,{replace:!0,to:"/profile/".concat(i)})}),Object(G.jsx)(w.b,{path:"/profile/:userId",element:Object(G.jsx)(ee,{})}),Object(G.jsx)(w.b,{path:"/users",element:Object(G.jsx)(te,{})}),Object(G.jsx)(w.b,{path:"/login",element:Object(G.jsx)(ne,{})}),Object(G.jsx)(w.b,{path:"/chat",element:Object(G.jsx)(re,{})}),Object(G.jsx)(w.b,{path:"*",element:Object(G.jsx)("div",{children:"404 NOT FOUND"})})]})})})]})})}),Object(G.jsx)("div",{className:y.a.footer,children:Object(G.jsx)(q,{})})]})})}):Object(G.jsx)($.a,{})})},ce=a.a.memo(ae);i.a.render(Object(G.jsx)(o.a,{store:x,children:Object(G.jsx)(ce,{})}),document.getElementById("root"))},25:function(e,t,n){e.exports={menu:"Menu_menu__2zsQd",menu__prevBlock:"Menu_menu__prevBlock__i-vHW",menu__body:"Menu_menu__body__2TZ1e",menu__link:"Menu_menu__link__2ebOC",menu__link_active:"Menu_menu__link_active__2xuIF"}},28:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g}));var r=n(5),a=n(33),c=n(11),i=function(){return c.a.get("auth/me").then((function(e){return e.data}))},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return c.a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},u=function(){return c.a.delete("auth/login").then((function(e){return e.data}))},s=function(){return c.a.get("/security/get-captcha-url").then((function(e){return e.data}))},l="social_network/auth/SET_USER_AUTH_DATA",d="social_network/auth/RESET_USER_AUTH_DATA",f="social_network/auth/GET_CAPTCHA_URL_SUCCESS",_="social_network/auth/SET_IS_FETCHING",j=function(e){return{type:f,captchaUrl:e}},h=function(e){return{type:l,authData:e}},b=function(){return{type:d}},p=function(e){return{type:_,isFetching:e}},O=function(){return function(e){return i().then((function(t){0===t.resultCode&&(e(h(t.data)),e(p(!1)))}))}},m=function(e,t,n,r){return function(c){c(p(!0)),o(e,t,n,r).then((function(e){if(0===e.resultCode)c(O());else{10===e.resultCode&&c((function(e){return s().then((function(t){e(j(t.url)),e(p(!1))}))}));var t=e.messages.length>0?e.messages[0]:"Somthing wrong",n=Object(a.a)("login",{_error:t});c(n),c(p(!1))}}))}},g=function(){return function(e){u().then((function(t){0===t.resultCode&&e(b())}))}},v={id:null,login:null,email:null,isAuth:!1,captchaUrl:null,isFetching:!1};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(r.a)(Object(r.a)({},e),{},{id:t.authData.id,login:t.authData.login,email:t.authData.email,isAuth:!0});case d:return Object(r.a)(Object(r.a)({},e),v);case f:return Object(r.a)(Object(r.a)({},e),{},{captchaUrl:t.captchaUrl});case _:return Object(r.a)(Object(r.a)({},e),{},{isFetching:t.isFetching});default:return e}}},34:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=function(e){return e.auth.isAuth},a=function(e){return e.auth.id},c=function(e){return e.auth}},50:function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return A})),n.d(t,"e",(function(){return C})),n.d(t,"d",(function(){return N})),n.d(t,"g",(function(){return P})),n.d(t,"b",(function(){return I}));var r=n(10),a=n(5),c=n(33),i=n(11),o=function(e){return i.a.get("profile/".concat(e)).then((function(e){return e.data}))},u=function(e){return i.a.get("profile/status/".concat(e)).then((function(e){return e.data}))},s=function(e){return i.a.get("profile/status/".concat(e)).then((function(e){return e.data}))},l=function(e){return i.a.put("profile/status/",{status:e}).then((function(e){return e.data}))},d=function(e){var t=new FormData;return t.append("image",e),i.a.put("profile/photo/",t,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){return e.data}))},f=function(e){return i.a.put("profile/",e).then((function(e){return e.data}))},_="social_network/profile/ADD-POST",j="social_network/profile/SET_USER_PROFILE",h="social_network/profile/SET_MY_PROFILE",b="social_network/profile/SET_USER_STATUS",p="social_network/profile/SET_MY_STATUS",O="social_network/profile/UPDATE_MY_STATUS",m="social_network/profile/UPDATE_MY_PHOTO",g="social_network/profile/SET_IS_FETCHING",v=function(e){return{type:m,photos:e}},x=function(e){return{type:O,myStatus:e}},w=function(e){return{type:p,myStatus:e}},E=function(e){return{type:b,status:e}},S=function(e){return{type:j,profile:e}},T=function(e){return{type:h,profile:e}},k=function(e){return{type:g,isFetching:e}},y=function(e){return function(t){l(e).then((function(n){0===n.resultCode&&t(x(e))}))}},A=function(e){return function(t){s(e).then((function(e){return t(w(e))}))}},C=function(e){return function(t){u(e).then((function(e){return t(E(e))}))}},N=function(e){return function(t,n){var r=n().auth.id,a=e===r;t(k(!0)),o(e).then((function(e){t(a?T(e):S(e)),t(k(!1))}))}},P=function(e){return function(t,n){var r=n().auth.id;return t(k(!0)),f(e).then((function(e){if(0!==e.resultCode)return t(k(!1)),t(Object(c.a)("profile",{_error:e.messages})),Promise.reject(e.messages);t(N(r))}))}},I=function(e){return function(t){d(e).then((function(e){0===e.resultCode&&t(v(e.data.photos))}))}},L={profilePosts:[{id:1,post:"It is my first post!",likesCount:20},{id:2,post:"How are you?",likesCount:10}],userProfile:null,userStatus:null,myProfile:null,myStatus:null,isFetching:!1};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(a.a)(Object(a.a)({},e),{},{myProfile:Object(a.a)(Object(a.a)({},e.myProfile),{},{photos:Object(a.a)({},t.photos)})});case _:var n=e.profilePosts[e.profilePosts.length-1].id+1,c={id:n,post:t.postText,likesCount:0};return Object(a.a)(Object(a.a)({},e),{},{profilePosts:[].concat(Object(r.a)(e.profilePosts),[c])});case j:return Object(a.a)(Object(a.a)({},e),{},{userProfile:t.profile});case h:return Object(a.a)(Object(a.a)({},e),{},{myProfile:t.profile});case b:return Object(a.a)(Object(a.a)({},e),{},{userStatus:t.status});case p:case O:return Object(a.a)(Object(a.a)({},e),{},{myStatus:t.myStatus});case g:return Object(a.a)(Object(a.a)({},e),{},{isFetching:t.isFetching});default:return e}}},61:function(e,t,n){"use strict";n(0);var r=n(93),a=n.n(r),c=n.p+"static/media/spinning-circles.f9cec7aa.svg",i=n(2);t.a=function(){return Object(i.jsx)("div",{className:a.a.appPreloader,children:Object(i.jsx)("img",{src:c,alt:"preloader"})})}},62:function(e,t,n){e.exports={footer:"Footer_footer__i0332"}},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return j}));var r=n(10),a=n(5),c=n(67),i="social_network/users/FOLLOW_TOGGLE",o="social_network/users/SET_USERS",u="social_network/users/SET_TOTAL_COUNT",s="social_network/users/SET_CURRENT_PAGE",l="social_network/users/TOGGLE_IS_FETCHING",d="social_network/users/IS_FOLLOWING_IN_PROGRESS_TOGGLE",f="social_network/users/SET_USERS_FILTER",_={setUsersFilterAC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{term:"",friend:null};return{type:f,payload:e}},followToggleAC:function(e){return{type:i,userId:e}},setUsersAC:function(e){return{type:o,usersList:e}},setTotalCountAC:function(e){return{type:u,totalCount:e}},setCurrentPageAC:function(e){return{type:s,currentPage:e}},toggleIsFetchingAC:function(e){return{type:l,isFetching:e}},isFollowingToggleAC:function(e){return{type:d,followingUserId:e}}},j=function(e,t,n){return function(r){r(_.toggleIsFetchingAC(!0)),c.a.getUsers(e,t,n).then((function(e){r(_.setUsersAC(e.items)),r(_.setTotalCountAC(e.totalCount)),r(_.toggleIsFetchingAC(!1))}))}},h={usersList:[],totalCount:0,currentPage:1,usersOnPageCount:5,isFetching:!1,isFollowingInProgress:[],usersFilter:{term:"",friend:null}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(a.a)(Object(a.a)({},e),{},{usersFilter:Object(a.a)({},t.payload)});case i:return Object(a.a)(Object(a.a)({},e),{},{usersList:e.usersList.map((function(e){return e.id===t.userId?Object(a.a)(Object(a.a)({},e),{},{followed:!e.followed}):e}))});case o:return Object(a.a)(Object(a.a)({},e),{},{usersList:Object(r.a)(t.usersList)});case u:return Object(a.a)(Object(a.a)({},e),{},{totalCount:t.totalCount});case s:return Object(a.a)(Object(a.a)({},e),{},{currentPage:t.currentPage});case l:return Object(a.a)(Object(a.a)({},e),{},{isFetching:t.isFetching});case d:var n=Object(r.a)(e.isFollowingInProgress);return n=n.indexOf(t.followingUserId)<0?[].concat(Object(r.a)(n),[t.followingUserId]):n.filter((function(e){return e!==t.followingUserId})),Object(a.a)(Object(a.a)({},e),{},{isFollowingInProgress:Object(r.a)(n)});default:return e}}},66:function(e,t,n){"use strict";t.a=n.p+"static/media/defaultUserImage.565306ac.jpg"},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(11),a={getUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{term:"",friend:null},a="users?page=".concat(e,"&count=").concat(t);return""!==n.term&&(a+="&term=".concat(n.term)),null!==n.friend&&(a+="&friend=".concat(n.friend)),r.a.get(a).then((function(e){return e.data}))},setUserFollow:function(e){return r.a.post("follow/".concat(e)).then((function(e){return e.data}))},setUserUnfollow:function(e){return r.a.delete("follow/".concat(e)).then((function(e){return e.data}))}}},72:function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return N})),n.d(t,"b",(function(){return P}));var r=n(10),a=n(5),c=n(235),i={"messages-received":[],"status-changed":[]},o=null,u=function(){f("pending"),setTimeout(j,5e3)},s=function(e){var t=JSON.parse(e.data);i["messages-received"].forEach((function(e){return e(t)}))},l=function(){f("ready")},d=function(e){f("error")},f=function(e){i["status-changed"].forEach((function(t){return t(e)}))},_=function(){var e,t,n,r;null===(e=o)||void 0===e||e.removeEventListener("close",u),null===(t=o)||void 0===t||t.removeEventListener("message",s),null===(n=o)||void 0===n||n.removeEventListener("error",d),null===(r=o)||void 0===r||r.removeEventListener("open",l)},j=function(){var e;null===(e=o)||void 0===e||e.close(),_(),o=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),f("pending"),o.addEventListener("close",u),o.addEventListener("message",s),o.addEventListener("error",d),o.addEventListener("open",l)},h=function(){j()},b=function(){var e;i["messages-received"]=[],i["status-changed"]=[],null===(e=o)||void 0===e||e.close(),_()},p=function(e,t){return i[e].push(t),function(){i[e]=i[e].filter((function(e){return e!==t}))}},O=function(e,t){i[e]=i[e].filter((function(e){return e!==t}))},m=function(e){var t;null===(t=o)||void 0===t||t.send(e)},g="SN/chat/MESSAGES_RECEIVED",v="SN/chat/MESSAGES_CLEARED",x="SN/chat/STATUS_CHANGED",w=function(e){var t=e.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{id:Object(c.a)()})})).filter((function(e,t,n){return t>=n.length-100}));return{type:g,messages:t}},E=function(){return{type:v}},S=function(e){return{type:x,status:e}},T=null,k=function(e){return null===T&&(T=function(t){e(w(t))}),T},y=null,A=function(e){return null===y&&(y=function(t){e(S(t))}),y},C=function(){return function(e){h(),p("messages-received",k(e)),p("status-changed",A(e))}},N=function(){return function(e){b(),O("messages-received",k(e)),O("status-changed",A(e)),e(E())}},P=function(e){return function(t){m(e)}},I={messages:[],status:"pending"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),Object(r.a)(t.messages))});case v:return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat()});case x:return Object(a.a)(Object(a.a)({},e),{},{status:t.status});default:return e}}},86:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var r=function(e){return e.profile.userProfile},a=function(e){return e.profile.myProfile},c=function(e){return e.profile.userStatus},i=function(e){return e.profile.myStatus},o=function(e){return e.profile.isFetching}},92:function(e,t,n){e.exports={aside:"Aside_aside__3ZQ4l"}},93:function(e,t,n){e.exports={appPreloader:"Preloader_appPreloader__2d9ar"}}},[[233,2,3]]]);
//# sourceMappingURL=main.1a070cad.chunk.js.map
(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[5],{240:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l}));var r=function(e){return e.users.usersList},a=function(e){return e.users.totalCount},s=function(e){return e.users.usersOnPageCount},i=function(e){return e.users.currentPage},o=function(e){return e.users.isFetching},c=function(e){return e.users.isFollowingInProgress},l=function(e){return e.users.usersFilter}},249:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(14),i=n(240),o=n(65),c=n(67),l=n(250),u=n.n(l),d=n(2),_=function(e){var t=e.userId,n=Object(s.c)(),r=function(e){return n(o.a.followToggleAC(e))},a=function(e){return n(o.a.isFollowingToggleAC(e))},l=Object(s.d)(i.e).find((function(e){return e.id===t})),_=Object(s.d)(i.c),f=(null===l||void 0===l?void 0:l.followed)?"UnFollow":"Follow";return Object(d.jsx)("button",{className:u.a.followBtn,onClick:function(){a(t),(null===l||void 0===l?void 0:l.followed)?c.a.setUserUnfollow(t).then((function(e){0===e.resultCode&&r(t),a(t)})):c.a.setUserFollow(t).then((function(e){0===e.resultCode&&r(t),a(t)}))},disabled:_.indexOf(t)>=0,children:f})};t.a=a.a.memo(_)},250:function(e,t,n){e.exports={followBtn:"FollowButton_followBtn__1mTbT"}},316:function(e,t,n){e.exports={userCard:"User_userCard__23XjB",userAvatar:"User_userAvatar__1y0nX",name:"User_name__2ol9d",status:"User_status__2NXPO",status__title:"User_status__title__2Yj77",status__text:"User_status__text__2TkyR",btnBlock:"User_btnBlock__34O4n",followBtn:"User_followBtn__3We4h"}},317:function(e,t,n){e.exports={wrapper:"Users_wrapper__2nSJq",pagination:"Users_pagination__2Bug_",usersList:"Users_usersList__5RBaq",form:"Users_form__2eAPk"}},318:function(e,t,n){e.exports={paginationBody:"Pagination_paginationBody__-V-hn",prevBtn:"Pagination_prevBtn__7rOfb",nextBtn:"Pagination_nextBtn__1L8n1",btn:"Pagination_btn__2mBPz",prevBtn_disabled:"Pagination_prevBtn_disabled__5oDUj",nextBtn_disabled:"Pagination_nextBtn_disabled__2aBcI",prevBtn_normal:"Pagination_prevBtn_normal__2_GGE",nextBtn_normal:"Pagination_nextBtn_normal__VpoqJ",activePage:"Pagination_activePage__-Jdyd",pages:"Pagination_pages__TuryD"}},322:function(e,t,n){e.exports={wrapper:"UsersSearchForm_wrapper__2suVJ",form:"UsersSearchForm_form__2ZX6d",input:"UsersSearchForm_input__1_GWX",select:"UsersSearchForm_select__17jQI",btn:"UsersSearchForm_btn__3EK69"}},333:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),s=n.n(a),i=n(14),o=n(4),c=n(240),l=n(65),u=n(61),d=n(23),_=n(41),f=n.n(_),b=n(316),j=n.n(b),m=n(66),p=n(249),g=n(2),O=function(e){var t=e.userInfo.id,n="/profile/".concat(t);return Object(g.jsxs)("div",{className:j.a.userCard,children:[Object(g.jsx)("div",{className:j.a.userAvatar,children:Object(g.jsx)(d.c,{to:n,children:Object(g.jsx)("img",{src:e.userInfo.photos.small?e.userInfo.photos.small:m.a,alt:"avatar"})})}),Object(g.jsxs)("div",{className:j.a.about,children:[Object(g.jsx)("div",{className:f()(j.a.about__item,j.a.name),children:e.userInfo.name}),Object(g.jsxs)("div",{className:f()(j.a.about__item,j.a.status),children:[Object(g.jsx)("span",{className:j.a.status__title,children:"Status:"}),Object(g.jsx)("div",{className:j.a.status__text,children:e.userInfo.status?e.userInfo.status:"------"})]})]}),Object(g.jsx)("div",{className:j.a.btnBlock,children:Object(g.jsx)(p.a,{userId:t})})]})},h=n(317),x=n.n(h),v=n(8),w=n(318),B=n.n(w),N=function(e){for(var t=e.totalCount,n=e.pageSize,r=void 0===n?5:n,s=e.currentPage,i=e.onPageNumberClick,o=e.portionSize,c=void 0===o?10:o,l=[],u=Math.ceil(t/r),d=1;d<=u;d++)l.push(d);var _=Math.ceil(u/c),b=Math.ceil(s/c),j=Object(a.useState)(b),m=Object(v.a)(j,2),p=m[0],O=m[1],h=(p-1)*c+1,x=p*c;return Object(g.jsx)("div",{className:B.a.wrapper,children:Object(g.jsxs)("div",{className:B.a.paginationBody,children:[Object(g.jsx)("button",{className:f()(B.a.prevBtn,B.a.btn,1===p?B.a.prevBtn_disabled:B.a.prevBtn_normal),onClick:function(){O(p-1)},disabled:1===p,children:"PREV"}),l.filter((function(e){return e>=h&&e<=x})).map((function(e){return Object(g.jsx)("span",{className:s===e?B.a.activePage:B.a.pages,onClick:function(t){s!==e&&i(e)},children:e},e)})),Object(g.jsx)("button",{className:f()(B.a.nextBtn,B.a.btn,p===_?B.a.nextBtn_disabled:B.a.nextBtn_normal),onClick:function(){O(p+1)},disabled:p===_,children:"NEXT"})]})})},P=s.a.memo(N),U=n(330),F=n(322),C=n.n(F),S=function(e){var t=e.usersFilter,n=e.onChangeUsersFilter,r={term:t.term,friend:null===t.friend?"null":!0===t.friend?"true":"false"};return Object(g.jsx)("div",{className:C.a.wrapper,children:Object(g.jsx)(U.d,{enableReinitialize:!0,initialValues:r,validate:function(e){return{}},onSubmit:function(e,t){var r=t.setSubmitting,a={term:e.term,friend:"null"===e.friend?null:"true"===e.friend};n(a),r(!1)},children:function(e){var t=e.isSubmitting;return Object(g.jsxs)(U.c,{className:C.a.form,children:[Object(g.jsx)(U.b,{type:"text",name:"term",className:C.a.input}),Object(g.jsx)(U.a,{name:"term",component:"div",className:C.a.error}),Object(g.jsxs)(U.b,{as:"select",name:"friend",className:C.a.select,children:[Object(g.jsx)("option",{value:"null",className:C.a.option,children:"All users"}),Object(g.jsx)("option",{value:"true",className:C.a.option,children:"Only Followed"}),Object(g.jsx)("option",{value:"false",className:C.a.option,children:"Only UnFollowed"})]}),Object(g.jsx)("button",{type:"submit",disabled:t,className:C.a.btn,children:"Find"})]})}})})},k=s.a.memo(S),I=function(){var e=Object(i.c)(),t=Object(o.l)(),n=Object(o.n)(),s=Object(i.d)(c.e),d=Object(i.d)(c.d),_=Object(i.d)(c.g),f=Object(i.d)(c.a),b=Object(i.d)(c.b),j=Object(i.d)(c.c),m=Object(i.d)(c.f),p=function(t){return e(l.a.setUsersFilterAC(t))},h=function(t){return e(l.a.followToggleAC(t))},v=function(t){return e(l.a.setCurrentPageAC(t))},w=function(t){return e(l.a.isFollowingToggleAC(t))},B=function(t,n,r){return e(Object(l.c)(t,n,r))},N=s.map((function(e){return Object(g.jsx)(O,{userInfo:e,followToggle:h,isFollowingInProgress:j,isFollowingToggle:w},e.id)}));return Object(a.useEffect)((function(){var e=new URLSearchParams(t.search),n=f,a=Object(r.a)({},m);if(e.has("page")&&(n=Number(e.get("page"))),e.has("term")&&(a.term=e.get("term")),e.has("friend"))switch(e.get("friend")){case"true":a.friend=!0;break;case"false":a.friend=!1;break;default:a.friend=null}v(n),p(a),B(n,_,a)}),[]),Object(a.useEffect)((function(){var e=new URLSearchParams;m.term&&e.set("term",m.term),null!==m.friend&&e.set("friend",String(m.friend)),1!==f&&e.set("page",String(f)),n({pathname:"/users",search:"?"+e.toString()})}),[m,f]),Object(g.jsx)(g.Fragment,{children:b?Object(g.jsx)(u.a,{}):Object(g.jsxs)("div",{className:x.a.wrapper,children:[Object(g.jsx)("div",{className:x.a.form,children:Object(g.jsx)(k,{usersFilter:m,onChangeUsersFilter:function(e){v(1),p(e),B(1,_,e)}})}),Object(g.jsx)("div",{className:x.a.pagination,children:Object(g.jsx)(P,{totalCount:d,pageSize:_,currentPage:f,onPageNumberClick:function(e){v(e),B(e,_,m)}})}),Object(g.jsx)("div",{className:x.a.usersList,children:N})]})})};t.default=s.a.memo(I)}}]);
//# sourceMappingURL=5.89333ad1.chunk.js.map